#!/bin/bash
# Test the API endpoint directly
TOKEN=$(cat << 'JWT'
eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdXRoIHRpbWUiOjE3Njg5Mjc0MzYwMDAsInVzZXIiOnsiYXBwX21ldGFkYXRhIjp7eyJwcm92aWRlciI6ImVtYWlsIiwicHJvdmlkZXJzIjpbeyJpZCI6ImVtYWlsIiwidXJsIjoiaHR0cHM6Ly9jb25jZXB0cy5jb20iLCJpY29uIjoibnVsbCJ9XX0sImF2YXRhcl91cmwiOm51bGwsImZ1bGxfbmFtZSI6IkYyNTggT3ZlcmR1ZSBUZXN0IFVzZXIiLCJpc3MiOiJodHRwczovL2RvWW9qZnNsdHZham1sc2Nwd2h1LnN1cGFiYXNlLmNvL2F1dGgvdjEiLCJlbWFpbCI6ImYyNTgtb3ZlcmR1ZS10ZXN0LTE3Njg5Mjc0MzYzMTZAZXhhbXBsZS5jb20iLCJwaG9uZSI6IiIsIm5hbWUiOiJGMjU4IE92ZXJkdWUgVGVzdCBVc2VyIiwicGljdHVyZSI6Imh0dHBzOi8vbHGuiZ3IuY29tL2F2YXRhci9kZWZhdWx0LmpwZyIsInN1YiI6IjM3MzUxODYwLTI3ZTItNGRiOS1iNDBhLTE3ZjgzZDc4YTMxMCIsInJvbGVzIjpbXX0sImF1ZCI6ImF1dGhlbnRpY2F0ZWQiLCJleHAiOjE3Njg5MzEwMzYsInN1YiI6IjM3MzUxODYwLTI3ZTItNGRiOS1iNDBhLTE3ZjgzZDc4YTMxMCIsImlhdCI6IjM3ZmY3ZjUzLTg2MDktNDc0Yy05YmJlLTQ3MWZhNDRlYzI3NyIsImVtb2lsIjoiNzI4NDZhYzQtN2IzZi00NDVlLWE4N2UtYTRkOWFjNjI4MWIyIn0.ZM5nKGqA5vbLXQqaQCq3j4jjGsCYdQnCdM5XBdHCHqY
JWT
)

curl -s "http://localhost:4001/api/v1/decisions?limit=3" \
  -H "Authorization: Bearer $TOKEN" \
  -H "Content-Type: application/json" | head -100
